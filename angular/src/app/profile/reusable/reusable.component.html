<div class="container-title">
	<h1 class="text-4xl p-4 font-semibold">{{ title }}</h1>
</div>
<form
	*ngIf="userType === uType.STUDENT"
	[formGroup]="dataFormGroup"
	(ngSubmit)="onSubmit()"
>
	<div class="edit-profile">
		<div class="container-1">
			<div class="image-box">
				<img class="profile-avatar__image" [src]="urlPhoto" />
				<input
					#photoUpload
					id="file"
					formControlName="photo"
					class="file-upload"
					type="file"
					accept="image/*"
					aria-label="File"
					value="urlPhoto"
					(change)="onPhotoSelected($event)"
				/>
				<mat-error
					*ngIf="dataFormGroup.controls['photo'].errors?.['required']"
					class="error-text"
				>
					Nie wczytano zdjęcia!
				</mat-error>
				<div class="text-3xl p-4 semibold">
					{{ name$ | async }} {{ surname$ | async }}
				</div>
				<div *ngIf="getAge()" class="text-3xl pb-4 semibold">
					wiek {{ getAge() }}
				</div>
				<div class="button-box">
					<button
						mat-button
						id="upload"
						class="btn2"
						type="button"
						aria-label="Upload"
						(click)="photoUpload.click()"
					>
						<span *ngIf="modificationType === mType.EDIT">Zmień zdjęcie</span>
						<span *ngIf="modificationType === mType.CREATE">Dodaj zdjęcie</span>
						<mat-icon iconPositionEnd>add_photo_alternate</mat-icon>
					</button>
				</div>
			</div>
		</div>
		<div class="container-2">
			<div class="data-container">
				<mat-form-field>
					<mat-label>Imię</mat-label>
					<input
						id="name"
						formControlName="name"
						type="text"
						placeholder="Imię"
						aria-label="Name"
						matInput
					/>
					<mat-error
						*ngIf="dataFormGroup.controls['name'].errors?.['required']"
						class="error-text"
					>
						Nie podano imienia!
					</mat-error>
				</mat-form-field>
				<mat-form-field>
					<mat-label>Nazwisko</mat-label>
					<input
						id="surname"
						formControlName="surname"
						type="text"
						placeholder="Nazwisko"
						aria-label="Surname"
						matInput
					/>
					<mat-error
						*ngIf="dataFormGroup.controls['surname'].errors?.['required']"
						class="error-text"
					>
						Nie podano imienia i nazwiska!
					</mat-error>
				</mat-form-field>
				<mat-form-field>
					<mat-label>Rok urodzenia</mat-label>
					<input
						id="yearOfBirth"
						formControlName="yearOfBirth"
						type="text"
						placeholder="Rok urodzenia"
						aria-label="YearOfBirth"
						matInput
					/>
					<mat-error
						*ngIf="dataFormGroup.controls['yearOfBirth'].errors?.['required']"
						class="error-text"
					>
						Nie podano roku urodzenia!
					</mat-error>
					<mat-error
						*ngIf="dataFormGroup.controls['yearOfBirth'].errors?.['pattern'] || 
				dataFormGroup.controls['yearOfBirth'].errors?.['max']"
						class="error-text"
					>
						Nieprawidłowy rok urodzenia!
					</mat-error>
				</mat-form-field>
				<mat-form-field>
					<mat-label>Numer studencki</mat-label>
					<input
						id="indexNumber"
						formControlName="indexNumber"
						type="text"
						placeholder="Numer studencki"
						aria-label="IndexNumber"
						matInput
					/>
					<mat-error
						*ngIf="dataFormGroup.controls['indexNumber'].errors?.['required']"
						class="error-text"
					>
						Nie podano numeru studenta!
					</mat-error>
				</mat-form-field>
				<mat-form-field>
					<mat-label>Uczelnia</mat-label>
					<input
						id="university"
						formControlName="university"
						type="text"
						placeholder="Uczelnia"
						aria-label="University"
						matInput
					/>
					<mat-error
						*ngIf="dataFormGroup.controls['university'].errors?.['required']"
						class="error-text"
					>
						Nie podano nazwy uczelni!
					</mat-error>
				</mat-form-field>
				<mat-form-field>
					<mat-label>Adres zamieszkania</mat-label>
					<input
						id="address"
						formControlName="address"
						type="text"
						placeholder="Adres zamieszkania"
						aria-label="Address"
						matInput
					/>
					<mat-error
						*ngIf="dataFormGroup.controls['address'].errors?.['required']"
						class="error-text"
					>
						Nie podano adresu!
					</mat-error>
				</mat-form-field>
				<mat-form-field>
					<mat-label>Nr telefonu</mat-label>
					<input matInput formControlName="phoneNumber" placeholder="Nr telefonu" />
					<mat-error
						*ngIf="dataFormGroup.controls['phoneNumber'].errors?.['required']"
						class="error-text"
					>
						Nie podano numeru telefonu!
					</mat-error>
					<mat-error
						*ngIf="dataFormGroup.controls['phoneNumber'].errors?.['pattern']"
						class="error-text"
					>
						Nieprawidłowy numer telefonu!
					</mat-error>
				</mat-form-field>
				<mat-form-field>
					<mat-label>Zainteresowania</mat-label>
					<mat-chip-grid #chipGrid aria-label="Hobbies">
						<mat-chip-row
							*ngFor="let myHobby of myHobbies"
							(removed)="remove(myHobby, myHobbies)"
						>
							{{ myHobby }}
							<button
								matChipRemove
								type="button"
								[attr.aria-label]="'remove ' + myHobby"
							>
								<mat-icon>cancel</mat-icon>
							</button>
						</mat-chip-row>
					</mat-chip-grid>
					<input
						#hobbiesInput
						[formControl]="hobbyCtrl"
						[matChipInputFor]="chipGrid"
						[matAutocomplete]="auto"
						[matChipInputSeparatorKeyCodes]="separatorKeysCodes"
						(matChipInputTokenEnd)="add($event, myHobbies, hobbyCtrl)"
					/>
					<mat-autocomplete
						#auto="matAutocomplete"
						(optionSelected)="selected($event)"
					>
						<mat-option
							*ngFor="let hobby of filteredHobbies$ | async"
							[value]="hobby"
							>{{ hobby }}</mat-option
						>
					</mat-autocomplete>
				</mat-form-field>
				<mat-form-field class="example-chip-list">
					<mat-label>Linki do social media</mat-label>
					<mat-chip-grid #chipGrid2 aria-label="Social media">
						<mat-chip-row
							*ngFor="let socialMedia of socialMedias"
							[editable]="true"
							[aria-description]="'press enter to edit ' + socialMedia"
							(removed)="remove(socialMedia, socialMedias)"
							(edited)="edit(socialMedia, $event)"
						>
							{{ socialMedia }}
							<button
								matChipRemove
								type="button"
								[attr.aria-label]="'remove ' + socialMedia"
							>
								<mat-icon>cancel</mat-icon>
							</button>
						</mat-chip-row>
						<input
							placeholder="Wpisz link do social media"
							[formControl]="socialMediaCtrl"
							[matChipInputFor]="chipGrid2"
							[matChipInputSeparatorKeyCodes]="separatorKeysCodes"
							[matChipInputAddOnBlur]="addOnBlur"
							(matChipInputTokenEnd)="add($event, socialMedias, socialMediaCtrl)"
						/>
					</mat-chip-grid>
				</mat-form-field>
				<div>
					<mat-form-field class="form-btn">
						<mat-label>Dokument tożsamości</mat-label>
						<mat-select id="documentType" formControlName="documentType">
							<mat-option *ngFor="let document of documents" [value]="document">
								{{ document }}
							</mat-option>
						</mat-select>
						<mat-error
							*ngIf="dataFormGroup.controls['documentType'].errors?.['required']"
							class="error-text"
						>
							Nie wybrano rodzaju dokumentu!
						</mat-error>
						<div
							*ngIf="dataFormGroup.controls['documentScan'].errors?.['required'] && !urlScan"
							class="error-text"
						>
							Nie wczytano skanu dokumentu!
						</div>
					</mat-form-field>
					<input
						#scanUpload
						id="documentScan"
						formControlName="documentScan"
						class="file-upload"
						type="file"
						accept="image/*,application/pdf"
						aria-label="File"
						(change)="onScanSelected($event)"
					/>
					<mat-icon *ngIf="urlScan">save</mat-icon>
					<span class="file-name">{{ fileScanName }}</span>
					<button
						mat-fab
						class="edit-btn"
						type="button"
						aria-label="Upload"
						matTooltip="Wczytaj skan dokumentu"
						(click)="scanUpload.click()"
					>
						<mat-icon>attachment</mat-icon>
					</button>
				</div>
				<mat-form-field>
					<mat-label>Data ważności dokumentu</mat-label>
					<input matInput formControlName="validTill" [matDatepicker]="picker" />
					<mat-hint>MM/DD/YYYY</mat-hint>
					<mat-datepicker-toggle
						matIconSuffix
						[for]="picker"
					></mat-datepicker-toggle>
					<mat-datepicker #picker [startAt]="startDate"></mat-datepicker>
					<mat-error
						*ngIf="dataFormGroup.controls['validTill'].errors?.['required']"
						class="error-text"
					>
						Nie określono daty ważności dokumentu!
					</mat-error>
				</mat-form-field>
				<div>
					<mat-form-field class="form-btn">
						<mat-label>Email</mat-label>
						<input
							id="email"
							formControlName="email"
							type="text"
							placeholder="Adres email"
							aria-label="Email"
							matInput
						/>
					</mat-form-field>
					<button
						mat-fab
						class="edit-btn"
						type="button"
						aria-label="Edit"
						matTooltip="Edytuj email"
						(click)="changeEmail()"
					>
						<mat-icon>edit</mat-icon>
					</button>
				</div>
				<div>
					<mat-form-field class="form-btn">
						<mat-label>Hasło</mat-label>
						<input
							id="password"
							formControlName="password"
							type="password"
							placeholder="Hasło"
							aria-label="Password"
							matInput
						/>
					</mat-form-field>
					<button
						mat-fab
						class="edit-btn"
						type="button"
						aria-label="Edit"
						matTooltip="Zmień hasło"
						(click)="changePassword()"
					>
						<mat-icon>edit</mat-icon>
					</button>
				</div>
				<button mat-button class="btn2" type="submit">
					Zapisz <mat-icon iconPositionEnd>done_outline</mat-icon>
				</button>
			</div>
		</div>
	</div>
</form>
<form
	*ngIf="userType === uType.OWNER"
	[formGroup]="dataFormGroup2"
	(ngSubmit)="onSubmit()"
>
	<div class="edit-profile">
		<div class="container-1">
			<div class="image-box">
				<img class="profile-avatar__image" [src]="urlPhoto" />
				<input
					#photoUpload
					id="file"
					formControlName="photo"
					class="file-upload"
					type="file"
					accept="image/*"
					aria-label="File"
					value="urlPhoto"
					(change)="onPhotoSelected($event)"
				/>
				<mat-error
					*ngIf="dataFormGroup2.controls['photo'].errors?.['required'] && !urlPhoto"
					class="error-text"
				>
					Nie wczytano zdjęcia!
				</mat-error>
				<div class="text-3xl p-4 semibold">
					{{ name$ | async }} {{ surname$ | async }}
				</div>
				<div class="button-box">
					<button
						mat-button
						id="upload"
						class="btn2"
						type="button"
						aria-label="Upload"
						(click)="photoUpload.click()"
					>
						<span *ngIf="modificationType === mType.EDIT">Zmień zdjęcie</span>
						<span *ngIf="modificationType === mType.CREATE">Dodaj zdjęcie</span>
						<mat-icon iconPositionEnd>add_photo_alternate</mat-icon>
					</button>
				</div>
			</div>
		</div>
		<div class="container-2">
			<div class="data-container">
				<mat-form-field>
					<mat-label>Imię</mat-label>
					<input
						id="name"
						formControlName="name"
						type="text"
						placeholder="Imię"
						aria-label="Name"
						matInput
					/>
					<mat-error
						*ngIf="dataFormGroup2.controls['name'].errors?.['required']"
						class="error-text"
					>
						Nie podano imienia!
					</mat-error>
				</mat-form-field>
				<mat-form-field>
					<mat-label>Nazwisko</mat-label>
					<input
						id="surname"
						formControlName="surname"
						type="text"
						placeholder="Nazwisko"
						aria-label="Surname"
						matInput
					/>
					<mat-error
						*ngIf="dataFormGroup2.controls['surname'].errors?.['required']"
						class="error-text"
					>
						Nie podano imienia i nazwiska!
					</mat-error>
				</mat-form-field>
				<mat-form-field>
					<mat-label>Adres zamieszkania</mat-label>
					<input
						id="address"
						formControlName="address"
						type="text"
						placeholder="Adres zamieszkania"
						aria-label="Address"
						matInput
					/>
					<mat-error
						*ngIf="dataFormGroup2.controls['address'].errors?.['required']"
						class="error-text"
					>
						Nie podano adresu!
					</mat-error>
				</mat-form-field>
				<mat-form-field>
					<mat-label>Nr telefonu</mat-label>
					<input matInput formControlName="phoneNumber" placeholder="Nr telefonu" />
					<mat-error
						*ngIf="dataFormGroup2.controls['phoneNumber'].errors?.['required']"
						class="error-text"
					>
						Nie podano numeru telefonu!
					</mat-error>
					<mat-error
						*ngIf="dataFormGroup2.controls['phoneNumber'].errors?.['pattern']"
						class="error-text"
					>
						Nieprawidłowy numer telefonu!
					</mat-error>
				</mat-form-field>
				<mat-form-field>
					<mat-label>Nr konta bankowego</mat-label>
					<input
						matInput
						formControlName="bankAccount"
						placeholder="Nr konta bankowego"
					/>
					<mat-error
						*ngIf="dataFormGroup2.controls['bankAccount'].errors?.['required']"
						class="error-text"
					>
						Nie podano numeru konta bankowego!
					</mat-error>
					<mat-error
						*ngIf="dataFormGroup2.controls['bankAccount'].errors?.['pattern']"
						class="error-text"
					>
						Nieprawidłowy numeru konta bankowego!
					</mat-error>
				</mat-form-field>
				<div>
					<mat-form-field class="form-btn">
						<mat-label>Dokument tożsamości</mat-label>
						<mat-select id="documentType" formControlName="documentType">
							<mat-option *ngFor="let document of documents" [value]="document">
								{{ document }}
							</mat-option>
						</mat-select>
						<mat-error
							*ngIf="dataFormGroup2.controls['documentType'].errors?.['required']"
							class="error-text"
						>
							Nie wybrano rodzaju dokumentu!
						</mat-error>
						<div
							*ngIf="dataFormGroup2.controls['documentScan'].errors?.['required'] && !urlScan"
							class="error-text"
						>
							Nie wczytano skanu dokumentu!
						</div>
					</mat-form-field>
					<input
						#scanUpload
						id="documentScan"
						formControlName="documentScan"
						class="file-upload"
						type="file"
						accept="image/*,application/pdf"
						aria-label="File"
						(change)="onScanSelected($event)"
					/>
					<mat-icon *ngIf="urlScan">save</mat-icon>
					<button
						mat-fab
						class="edit-btn"
						type="button"
						aria-label="Upload"
						matTooltip="Wczytaj skan dokumentu"
						(click)="scanUpload.click()"
					>
						<mat-icon>attachment</mat-icon>
					</button>
				</div>
				<mat-form-field>
					<mat-label>Data ważności dokumentu</mat-label>
					<input matInput formControlName="validTill" [matDatepicker]="picker" />
					<mat-datepicker-toggle
						matIconSuffix
						[for]="picker"
					></mat-datepicker-toggle>
					<mat-datepicker #picker></mat-datepicker>
					<mat-error
						*ngIf="dataFormGroup2.controls['validTill'].errors?.['required']"
						class="error-text"
					>
						Nie określono daty ważności dokumentu!
					</mat-error>
				</mat-form-field>
				<div>
					<mat-form-field class="form-btn">
						<mat-label>Email</mat-label>
						<input
							id="email"
							formControlName="email"
							type="text"
							placeholder="Adres email"
							aria-label="Email"
							matInput
						/>
					</mat-form-field>
					<button
						mat-fab
						class="edit-btn"
						type="button"
						aria-label="Edit"
						matTooltip="Edytuj email"
						(click)="changeEmail()"
					>
						<mat-icon>edit</mat-icon>
					</button>
				</div>
				<div>
					<mat-form-field class="form-btn">
						<mat-label>Hasło</mat-label>
						<input
							id="password"
							formControlName="password"
							type="password"
							placeholder="Hasło"
							aria-label="Password"
							matInput
						/>
					</mat-form-field>
					<button
						mat-fab
						class="edit-btn"
						type="button"
						aria-label="Edit"
						matTooltip="Zmień hasło"
						(click)="changePassword()"
					>
						<mat-icon>edit</mat-icon>
					</button>
				</div>
				<button mat-button class="btn2" type="submit">
					Zapisz <mat-icon iconPositionEnd>done_outline</mat-icon>
				</button>
			</div>
		</div>
	</div>
</form>
