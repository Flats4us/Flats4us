<mat-card>
	<h2>Zmiana hasła</h2>
	<mat-card-content class="mx-auto pt-1 w-3/5 md:w-1/3">
		<form [formGroup]="passwordChangeForm" (ngSubmit)="onSubmit()">
			<mat-form-field class="no-border-style" appearance="outline">
				<mat-label>Aktualne hasło</mat-label>
				<input
					formControlName="oldPassword"
					matInput
					[type]="hideOldPassword ? 'password' : 'text'"
				/>
				<button
					mat-icon-button
					type="button"
					matSuffix
					[attr.aria-label]="'Hide password'"
					[attr.aria-pressed]="hideOldPassword"
					(click)="hideOldPassword = !hideOldPassword"
				>
					<mat-icon>{{
						hideOldPassword ? "visibility_off" : "visibility"
					}}</mat-icon>
				</button>
				<mat-error *ngIf="passwordChangeForm.invalid">Pole wymagane</mat-error>
			</mat-form-field>

			<mat-form-field class="no-border-style" appearance="outline">
				<mat-label>Nowe hasło</mat-label>
				<input
					formControlName="newPassword"
					matInput
					[type]="hideNewPassword ? 'password' : 'text'"
				/>
				<button
					mat-icon-button
					type="button"
					matSuffix
					[attr.aria-label]="'Hide password'"
					[attr.aria-pressed]="hideNewPassword"
					(click)="hideNewPassword = !hideNewPassword"
				>
					<mat-icon>{{
						hideNewPassword ? "visibility_off" : "visibility"
					}}</mat-icon>
				</button>
				<mat-error *ngIf="passwordChangeForm.invalid">{{
					getErrorMessage()
				}}</mat-error>
			</mat-form-field>

			<mat-form-field class="no-border-style" appearance="outline">
				<mat-label>Powtórz nowe hasło</mat-label>
				<input
					formControlName="confirmPassword"
					matInput
					[type]="hideConfirmPassword ? 'password' : 'text'"
					[errorStateMatcher]="matcher"
				/>
				<mat-error *ngIf="passwordChangeForm.hasError('passwordNoMatch')"
					>Hasła muszą być takie same</mat-error
				>
				<button
					mat-icon-button
					type="button"
					matSuffix
					[attr.aria-label]="'Hide password'"
					[attr.aria-pressed]="hideConfirmPassword"
					(click)="hideConfirmPassword = !hideConfirmPassword"
				>
					<mat-icon>{{
						hideConfirmPassword ? "visibility_off" : "visibility"
					}}</mat-icon>
				</button>
			</mat-form-field>

			<div class="buttons">
				<button
					mat-flat-button
					class="btn-submit"
					type="submit"
					[disabled]="!passwordChangeForm.valid"
				>
					Zapisz
				</button>
				<button mat-flat-button class="btn-cancel" type="button" routerLink="../">
					Anuluj
				</button>
			</div>
		</form>
	</mat-card-content>
</mat-card>
