<div class="survey">
	<form
		class="survey-form"
		[formGroup]="createProfileMode ? formToAdd : offerForm"
	>
		<ng-container *ngFor="let question of questions$ | async; let i = index">
			<div *ngIf="i < numberOfQuestions || offerForm.get('16')">
				<div class="pt-4">
					<mat-slide-toggle
						*ngIf="
							question.typeName === typeName.SWITCH &&
							question.name !== 'lookingForRoommate'
						"
						[formControlName]="question.name"
					></mat-slide-toggle>
				</div>

				<div class="pt-4">
					<mat-slide-toggle
						*ngIf="
							question.typeName === typeName.SWITCH &&
							question.name === 'lookingForRoommate'
						"
						[formControlName]="question.name"
						[(ngModel)]="showMoreQuestions"
					></mat-slide-toggle>
				</div>

				<mat-label *ngIf="i < 7">{{ question.name }} </mat-label>

				<mat-label *ngIf="i >= 7 && showMoreQuestions"
					>{{ question.name }}
				</mat-label>

				<div class="pt-4">
					<mat-slider
						*ngIf="question.typeName === typeName.SLIDER"
						discrete
						min="0"
						max="5"
						step="1"
					>
						<input matSliderThumb [formControlName]="question.name" />
					</mat-slider>
				</div>

				<mat-form-field
					*ngIf="
						question.typeName === typeName.TEXT &&
						showMoreQuestions &&
						question.name !== 'city'
					"
					class="h-min"
				>
					<input matInput type="text" [formControlName]="question.name" />
				</mat-form-field>

				<mat-form-field
					*ngIf="
						question.typeName === typeName.TEXT &&
						showMoreQuestions &&
						question.name === 'city'
					"
					class="h-min"
				>
					<input
						matInput
						type="text"
						[formControlName]="question.name"
						[matAutocomplete]="autoCity"
					/>
					<mat-autocomplete #autoCity="matAutocomplete">
						<mat-optgroup
							*ngFor="let groupCities of citiesGroupOptions$ | async"
							[label]="groupCities.whole"
						>
							<mat-option *ngFor="let city of groupCities.parts" [value]="city">
								{{ city }}
							</mat-option>
						</mat-optgroup>
					</mat-autocomplete>
				</mat-form-field>

				<mat-form-field
					*ngIf="
						question.typeName === typeName.NUMBER &&
						showMoreQuestions &&
						question.name === 'maxNumberOfRoommates'
					"
					class="h-min"
				>
					<input matInput type="number" min="1" [formControlName]="question.name" />
					<mat-error *ngIf="question.name === 'maxNumberOfRoommates'">
						Podano nieprawidłową wartość!
					</mat-error>
				</mat-form-field>

				<mat-form-field
					*ngIf="
						question.typeName === typeName.NUMBER &&
						showMoreQuestions &&
						question.name === 'minRoommateAge'
					"
					class="h-min"
				>
					<input
						matInput
						type="number"
						min="18"
						max="150"
						[formControlName]="question.name"
					/>
					<mat-error> Podano nieprawidłowy wiek! </mat-error>
				</mat-form-field>

				<mat-form-field
					*ngIf="
						question.typeName === typeName.NUMBER &&
						showMoreQuestions &&
						question.name === 'maxRoommateAge'
					"
					class="h-min"
				>
					<input
						matInput
						type="number"
						min="18"
						max="150"
						[formControlName]="question.name"
					/>
					<mat-error> Podano nieprawidłowy wiek! </mat-error>
				</mat-form-field>

				<section
					*ngIf="question.typeName === typeName.CHECKBOX && showMoreQuestions"
					class="example-section"
				>
					<mat-checkbox
						*ngFor="let answer of question.answers; let i = index"
						value="{{ i }}"
						>{{ answer }}</mat-checkbox
					>
				</section>

				<mat-radio-group
					*ngIf="
						(question.typeName === typeName.RADIOBUTTON && showMoreQuestions) ||
						(i < 7 &&
							question.typeName === typeName.RADIOBUTTON &&
							!createProfileMode)
					"
					[formControlName]="question.name"
				>
					<mat-radio-button
						*ngFor="let answer of question.answers; let i = index"
						[value]="i"
						>{{ answer }}</mat-radio-button
					>
				</mat-radio-group>
			</div>
		</ng-container>
	</form>
</div>
