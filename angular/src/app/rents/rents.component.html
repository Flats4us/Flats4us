<div class="rents">
	<div class="container-1">
		<h1>
			Moje wynajmy<button
				mat-icon-button
				id="add"
				class="box-icon"
				aria-label="Add"
				matTooltip="Utwórz najem"
				(click)="addOffer()"
			>
				<mat-icon>add</mat-icon>
			</button>
		</h1>
		<mat-divider class="divider"></mat-divider>
		<mat-nav-list>
			<a
				*ngFor="let rent of rentsOptions$ | async"
				mat-list-item
				routerLink="{{ rent.link }}"
				(click)="showRent(rent)"
				><div class="box-1">
					<span>{{ rent.title }}</span>
					<mat-icon *ngIf="rent.status !== 'suspended'" class="box-icon-2"
						>check_circle</mat-icon
					>
					<mat-icon *ngIf="rent.status === 'suspended'" class="box-icon-3"
						>check_circle</mat-icon
					>
				</div></a
			>
		</mat-nav-list>
	</div>
	<div class="container-2">
		<mat-form-field appearance="fill" class="title">
			<mat-label>Wynajem - {{ actualRent.title }}</mat-label>
			<span matSuffix>
				<button
					class="box-icon"
					id="menu"
					mat-icon-button
					matTooltip="Więcej opcji"
					aria-label="MenuButton"
					[matMenuTriggerFor]="menu"
					[disabled]="actualRent.status === 'suspended'"
				>
					<mat-icon>more_horiz</mat-icon>
				</button>
				<mat-menu #menu="matMenu" id="sort">
					<button
						*ngFor="let menuOption of this.rentsService.menuOptions"
						mat-menu-item
						[value]="menuOption.description"
						(click)="onSelect(menuOption)"
					>
						<span *ngIf="menuOption.option !== 'closeRent'">{{
							menuOption.description
						}}</span>
						<span *ngIf="menuOption.option === 'closeRent'" class="close-rent">{{
							menuOption.description
						}}</span>
					</button>
				</mat-menu>
			</span>
			<input
				id="title"
				formControlName="title"
				type="text"
				placeholder="Tytuł"
				aria-label="Title"
				matInput
				[disabled]="true"
			/>
		</mat-form-field>
		<div class="gallery">
			<div class="container slider">
				<div [@slideAnimation]="currentIndex">
					<ng-template
						ngFor
						[ngForOf]="actualRent.imageArray"
						let-slide
						let-i="index"
					>
						<img
							class="slide slide-animation nonDraggableImage"
							*ngIf="isCurrentSlideIndex(i)"
							(swiperight)="nextSlide()"
							(swipeleft)="prevSlide()"
							[src]="slide.image"
						/>
					</ng-template>
				</div>

				<button class="arrow prev" (click)="nextSlide()"></button>
				<button class="arrow next" (click)="prevSlide()"></button>
				<nav class="nav">
					<div class="wrapper">
						<ul class="dots">
							<li
								class="dot"
								*ngFor="let slide of actualRent.imageArray; let i = index"
							>
								<span
									[ngClass]="{ active: isCurrentSlideIndex(i) }"
									(click)="setCurrentSlideIndex(i)"
								></span>
							</li>
						</ul>
					</div>
				</nav>
			</div>
		</div>
		<div class="button-box">
			<button
				mat-button
				class="btn"
				[disabled]="actualRent.status === 'suspended'"
			>
				Szczegóły oferty
			</button>
			<mat-label class="label-1">Cena {{ actualRent.price }} pln/msc</mat-label>
		</div>
		<div class="label-3">
			<mat-label class="label-2"
				><mat-icon>description</mat-icon><span>Opis oferty</span></mat-label
			>
			<mat-divider></mat-divider>
		</div>
		<cdk-virtual-scroll-viewport
			appendOnly
			itemSize="50"
			class="example-viewport"
		>
			<div class="column-1">
				<p>Data wystawienia:</p>
				<p>Data zakończenia:</p>
				<p>Adres:</p>
				<p>Metraż:</p>
				<p>Data wystawienia oceny:</p>
				<p>Okres wynajmu:</p>
				<p>Maks. liczba mieszkańców:</p>
				<p>Wyposażenie:</p>
				<p>Data płatności czynszu:</p>
				<p>Informacje o umowie:</p>
				<p>Współlokatorzy:</p>
			</div>
			<div class="column-2">
				<p>{{ actualRent.publishDate }}</p>
				<p>12-12-2024</p>
				<p>Marszałkowska 44, {{ actualRent.property.regionCity.city }}</p>
				<p>{{ actualRent.property.area }} m²</p>
				<p>-</p>
				<p>{{ actualRent.period }} lata</p>
				<p>4</p>
				<p>-</p>
				<p>10-12-2022</p>
				<p>-</p>
				<p>Jan Kowalski, Barbara Nowak</p>
			</div>
		</cdk-virtual-scroll-viewport>
		<div class="label-3">
			<mat-label class="label-2"
				><mat-icon>attach_money</mat-icon><span>Płatności</span></mat-label
			>
			<mat-divider></mat-divider>
		</div>
		<div class="payments">
			<table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
				<ng-container
					*ngFor="let column of this.rentsService.displayedColumns"
					[matColumnDef]="column"
				>
					<th mat-header-cell *matHeaderCellDef>{{ column }}</th>
					<td mat-cell *matCellDef="let payment">{{ payment[column] }}</td>
				</ng-container>
				<tr
					mat-row
					*matRowDef="let paymentRow; columns: this.rentsService.displayedColumns"
				></tr>
			</table>
		</div>
	</div>
</div>
